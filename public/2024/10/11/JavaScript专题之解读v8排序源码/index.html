<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="JavaScript专题之解读 v8 排序源码前言v8 是 Chrome 的 JavaScript 引擎，其中关于数组的排序完全采用了 JavaScript 实现。 排序采用的算法跟数组的长度有关，当数组长度小于等于 10 时，采用插入排序，大于 10 的时候，采用快速排序。(当然了，这种说法并不严谨)。 我们先来看看插入排序和快速排序。 插入排序原理将第一个元素视为有序序列，遍历数组，将之后的元">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2024/10/11/JavaScript%E4%B8%93%E9%A2%98%E4%B9%8B%E8%A7%A3%E8%AF%BBv8%E6%8E%92%E5%BA%8F%E6%BA%90%E7%A0%81/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="JavaScript专题之解读 v8 排序源码前言v8 是 Chrome 的 JavaScript 引擎，其中关于数组的排序完全采用了 JavaScript 实现。 排序采用的算法跟数组的长度有关，当数组长度小于等于 10 时，采用插入排序，大于 10 的时候，采用快速排序。(当然了，这种说法并不严谨)。 我们先来看看插入排序和快速排序。 插入排序原理将第一个元素视为有序序列，遍历数组，将之后的元">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/insertion.gif">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick1.png">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick2.png">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick3.png">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quicksort.gif">
<meta property="og:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/insertion-vs-quick.gif">
<meta property="article:published_time" content="2024-10-11T00:29:58.407Z">
<meta property="article:modified_time" content="2024-10-11T00:29:58.983Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/insertion.gif">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-JavaScript专题之解读v8排序源码" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/10/11/JavaScript%E4%B8%93%E9%A2%98%E4%B9%8B%E8%A7%A3%E8%AF%BBv8%E6%8E%92%E5%BA%8F%E6%BA%90%E7%A0%81/" class="article-date">
  <time class="dt-published" datetime="2024-10-11T00:29:58.407Z" itemprop="datePublished">2024-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="JavaScript专题之解读-v8-排序源码"><a href="#JavaScript专题之解读-v8-排序源码" class="headerlink" title="JavaScript专题之解读 v8 排序源码"></a>JavaScript专题之解读 v8 排序源码</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>v8 是 Chrome 的 JavaScript 引擎，其中关于数组的排序完全采用了 JavaScript 实现。</p>
<p>排序采用的算法跟数组的长度有关，当数组长度小于等于 10 时，采用插入排序，大于 10 的时候，采用快速排序。(当然了，这种说法并不严谨)。</p>
<p>我们先来看看插入排序和快速排序。</p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>将第一个元素视为有序序列，遍历数组，将之后的元素依次插入这个构建的有序序列中。</p>
<h3 id="图示"><a href="#图示" class="headerlink" title="图示"></a>图示</h3><p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/insertion.gif" alt="插入排序"></p>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">insertionSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; arr.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> element = arr[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">var</span> tmp = arr[j];</span><br><span class="line">            <span class="keyword">var</span> order = tmp - element;</span><br><span class="line">            <span class="keyword">if</span> (order &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                arr[j + <span class="number">1</span>] = tmp;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        arr[j + <span class="number">1</span>] = element;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">insertionSort</span>(arr));</span><br></pre></td></tr></table></figure>

<h3 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>时间复杂度是指执行算法所需要的计算工作量，它考察当输入值大小趋近无穷时的情况，一般情况下，算法中基本操作重复执行的次数是问题规模 n 的某个函数。</p>
<p>最好情况：数组升序排列，时间复杂度为：O(n)</p>
<p>最坏情况：数组降序排列，时间复杂度为：O(n²)</p>
<h3 id="稳定性"><a href="#稳定性" class="headerlink" title="稳定性"></a>稳定性</h3><p>稳定性，是指相同的元素在排序后是否还保持相对的位置。</p>
<p>要注意的是对于不稳定的排序算法，只要举出一个实例，即可说明它的不稳定性；而对于稳定的排序算法，必须对算法进行分析从而得到稳定的特性。</p>
<p>比如 [3, 3, 1]，排序后，还是 [3, 3, 1]，但是其实是第二个 3 在 第一个 3 前，那这就是不稳定的排序算法。</p>
<p>插入排序是稳定的算法。</p>
<h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><p>当数组是快要排序好的状态或者问题规模比较小的时候，插入排序效率更高。这也是为什么 v8 会在数组长度小于等于 10 的时候采用插入排序。</p>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><ol>
<li>选择一个元素作为”基准”</li>
<li>小于”基准”的元素，都移到”基准”的左边；大于”基准”的元素，都移到”基准”的右边。</li>
<li>对”基准”左边和右边的两个子集，不断重复第一步和第二步，直到所有子集只剩下一个元素为止。</li>
</ol>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>示例和下面的实现方式来源于阮一峰老师的<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2011/04/quicksort_in_javascript.html">《快速排序（Quicksort）的Javascript实现》</a> </p>
<p>以数组 [85, 24, 63, 45, 17, 31, 96, 50] 为例：</p>
<p>第一步，选择中间的元素 45 作为”基准”。（基准值可以任意选择，但是选择中间的值比较容易理解。）</p>
<p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick1.png" alt="quick 第一步"></p>
<p>第二步，按照顺序，将每个元素与”基准”进行比较，形成两个子集，一个”小于45”，另一个”大于等于45”。</p>
<p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick2.png" alt="quick 第二步"></p>
<p>第三步，对两个子集不断重复第一步和第二步，直到所有子集只剩下一个元素为止。</p>
<p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quick3.png" alt="quick 第三步"></p>
<h3 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> quickSort = <span class="keyword">function</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">　　<span class="keyword">if</span> (arr.<span class="property">length</span> &lt;= <span class="number">1</span>) &#123; <span class="keyword">return</span> arr; &#125;</span><br><span class="line">    <span class="comment">// 取数组的中间元素作为基准</span></span><br><span class="line">　　<span class="keyword">var</span> pivotIndex = <span class="title class_">Math</span>.<span class="title function_">floor</span>(arr.<span class="property">length</span> / <span class="number">2</span>);</span><br><span class="line">　　<span class="keyword">var</span> pivot = arr.<span class="title function_">splice</span>(pivotIndex, <span class="number">1</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">　　<span class="keyword">var</span> left = [];</span><br><span class="line">　　<span class="keyword">var</span> right = [];</span><br><span class="line"></span><br><span class="line">　　<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.<span class="property">length</span>; i++)&#123;</span><br><span class="line">　　　　<span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">　　　　　　left.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">　　　　&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">　　　　　　right.<span class="title function_">push</span>(arr[i]);</span><br><span class="line">　　　　&#125;</span><br><span class="line">　　&#125;</span><br><span class="line">　　<span class="keyword">return</span> <span class="title function_">quickSort</span>(left).<span class="title function_">concat</span>([pivot], <span class="title function_">quickSort</span>(right));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>然而这种实现方式需要额外的空间用来储存左右子集，所以还有一种原地(in-place)排序的实现方式。</p>
<h3 id="图示-1"><a href="#图示-1" class="headerlink" title="图示"></a>图示</h3><p>我们来看看原地排序的实现图示：</p>
<p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/quicksort.gif" alt="快速排序"></p>
<p>为了让大家看明白快速排序的原理，我调慢了执行速度。</p>
<p>在这张示意图里，基准的取值规则是取最左边的元素，黄色代表当前的基准，绿色代表小于基准的元素，紫色代表大于基准的元素。</p>
<p>我们会发现，绿色的元素会紧挨在基准的右边，紫色的元素会被移到后面，然后交换基准和绿色的最后一个元素，此时，基准处于正确的位置，即前面的元素都小于基准值，后面的元素都大于基准值。然后再对前面的和后面的多个元素取基准，做排序。</p>
<h3 id="in-place-实现"><a href="#in-place-实现" class="headerlink" title="in-place 实现"></a>in-place 实现</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">quickSort</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">    <span class="comment">// 交换元素</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">swap</span>(<span class="params">arr, a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> temp = arr[a];</span><br><span class="line">        arr[a] = arr[b];</span><br><span class="line">        arr[b] = temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">partition</span>(<span class="params">arr, left, right</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> pivot = arr[left];</span><br><span class="line">        <span class="keyword">var</span> storeIndex = left;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = left + <span class="number">1</span>; i &lt;= right; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] &lt; pivot) &#123;</span><br><span class="line">                <span class="title function_">swap</span>(arr, ++storeIndex, i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="title function_">swap</span>(arr, left, storeIndex);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> storeIndex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">sort</span>(<span class="params">arr, left, right</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">            <span class="keyword">var</span> storeIndex = <span class="title function_">partition</span>(arr, left, right);</span><br><span class="line">            <span class="title function_">sort</span>(arr, left, storeIndex - <span class="number">1</span>);</span><br><span class="line">            <span class="title function_">sort</span>(arr, storeIndex + <span class="number">1</span>, right);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">sort</span>(arr, <span class="number">0</span>, arr.<span class="property">length</span> - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">quickSort</span>(<span class="number">6</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">8</span>))</span><br></pre></td></tr></table></figure>

<h3 id="稳定性-1"><a href="#稳定性-1" class="headerlink" title="稳定性"></a>稳定性</h3><p>快速排序是不稳定的排序。如果要证明一个排序是不稳定的，你只用举出一个实例就行。</p>
<p>所以我们举一个呗~</p>
<p>就以数组 [1, 2, 3, 3, 4, 5] 为例，因为基准的选择不确定，假如选定了第三个元素(也就是第一个 3) 为基准，所有小于 3 的元素在前面，大于等于 3 的在后面，排序的结果没有问题。可是如果选择了第四个元素(也就是第二个 3 )，小于 3 的在基准前面，大于等于 3 的在基准后面，第一个 3 就会被移动到 第二个 3 后面，所以快速排序是不稳定的排序。</p>
<h3 id="时间复杂度-1"><a href="#时间复杂度-1" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>阮一峰老师的实现中，基准取的是中间元素，而原地排序中基准取最左边的元素。快速排序的关键点就在于基准的选择，选取不同的基准时，会有不同性能表现。</p>
<p>快速排序的时间复杂度最好为 O(nlogn)，可是为什么是 nlogn 呢？来一个并不严谨的证明：</p>
<p>在最佳情况下，每一次都平分整个数组。假设数组有 n 个元素，其递归的深度就为 log<sub>2</sub>n + 1，时间复杂度为 O(n)[(log<sub>2</sub>n + 1)]，因为时间复杂度考察当输入值大小趋近无穷时的情况，所以会忽略低阶项，时间复杂度为：o(nlog<sub>2</sub>n)。</p>
<p>如果一个程序的运行时间是对数级的，则随着 n 的增大程序会渐渐慢下来。如果底数是 10，lg1000 等于 3，如果 n 为 1000000，lgn 等于 6，仅为之前的两倍。如果底数为 2，log<sub>2</sub>1000 的值约为 10，log<sub>2</sub>1000000 的值约为 19，约为之前的两倍。我们可以发现任意底数的一个对数函数其实都相差一个常数倍而已。所以我们认为 O(logn)已经可以表达所有底数的对数了，所以时间复杂度最后为： O(nlogn)。</p>
<p>而在最差情况下，如果对一个已经排序好的数组，每次选择基准元素时总是选择第一个元素或者最后一个元素，那么每次都会有一个子集是空的，递归的层数将达到 n，最后导致算法的时间复杂度退化为 O(n²)。</p>
<p>这也充分说明了一个基准的选择是多么的重要，而 v8 为了提高性能，就对基准的选择做了很多优化。</p>
<h2 id="v8-基准选择"><a href="#v8-基准选择" class="headerlink" title="v8 基准选择"></a>v8 基准选择</h2><p>v8 选择基准的原理是从头和尾之外再选择一个元素，然后三个值排序取中间值。</p>
<p>当数组长度大于 10 但是小于 1000 的时候，取中间位置的元素，实现代码为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基准的下标</span></span><br><span class="line"><span class="comment">// &gt;&gt; 1 相当于除以 2 (忽略余数)</span></span><br><span class="line">third_index = <span class="keyword">from</span> + ((to - <span class="keyword">from</span>) &gt;&gt; <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>当数组长度大于 1000 的时候，每隔 200 ~ 215 个元素取一个值，然后将这些值进行排序，取中间值的下标，实现的代码为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简单处理过</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">GetThirdIndex</span>(<span class="params">a, <span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> t_array = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// &amp; 位运算符</span></span><br><span class="line">    <span class="keyword">var</span> increment = <span class="number">200</span> + ((to - <span class="keyword">from</span>) &amp; <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">from</span> += <span class="number">1</span>;</span><br><span class="line">    to -= <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span>; i &lt; to; i += increment) &#123;</span><br><span class="line">        t_array[j] = [i, a[i]];</span><br><span class="line">        j++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 对随机挑选的这些值进行排序</span></span><br><span class="line">    t_array.<span class="title function_">sort</span>(<span class="keyword">function</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">comparefn</span>(a[<span class="number">1</span>], b[<span class="number">1</span>]);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 取中间值的下标</span></span><br><span class="line">    <span class="keyword">var</span> third_index = t_array[t_array.<span class="property">length</span> &gt;&gt; <span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">return</span> third_index;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也许你会好奇 <code>200 + ((to - from) &amp; 15)</code> 是什么意思？</p>
<p><code>&amp;</code> 表示是按位与，对整数操作数逐位执行布尔与操作。只有两个操作数中相对应的位都是 1，结果中的这一位才是 1。</p>
<p>以 <code>15 &amp; 127</code> 为例：</p>
<p>15 二进制为： （0000 1111）</p>
<p>127 二进制为：（1111 1111）</p>
<p>按位与结果为：（0000 1111）＝ 15</p>
<p>所以 <code>15 &amp; 127</code> 的结果为 <code>15</code>。</p>
<p>注意 15 的二进制为： <code>1111</code>，这就意味着任何和 15 按位与的结果都会小于或者等于 15，这才实现了每隔 200 ~ 215 个元素取一个值。</p>
<h2 id="v8-源码"><a href="#v8-源码" class="headerlink" title="v8 源码"></a>v8 源码</h2><p>终于到了看源码的时刻！源码地址为：<a target="_blank" rel="noopener" href="https://github.com/v8/v8/blob/master/src/js/array.js#L758">https://github.com/v8/v8/blob/master/src/js/array.js#L758</a>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">InsertionSort</span>(<span class="params">a, <span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="keyword">from</span> + <span class="number">1</span>; i &lt; to; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> element = a[i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="keyword">from</span>; j--) &#123;</span><br><span class="line">            <span class="keyword">var</span> tmp = a[j];</span><br><span class="line">            <span class="keyword">var</span> order = <span class="title function_">comparefn</span>(tmp, element);</span><br><span class="line">            <span class="keyword">if</span> (order &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                a[j + <span class="number">1</span>] = tmp;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        a[j + <span class="number">1</span>] = element;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">QuickSort</span>(<span class="params">a, <span class="keyword">from</span>, to</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> third_index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">// Insertion sort is faster for short arrays.</span></span><br><span class="line">        <span class="keyword">if</span> (to - <span class="keyword">from</span> &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">            <span class="title class_">InsertionSort</span>(a, <span class="keyword">from</span>, to);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (to - <span class="keyword">from</span> &gt; <span class="number">1000</span>) &#123;</span><br><span class="line">            third_index = <span class="title class_">GetThirdIndex</span>(a, <span class="keyword">from</span>, to);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            third_index = <span class="keyword">from</span> + ((to - <span class="keyword">from</span>) &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Find a pivot as the median of first, last and middle element.</span></span><br><span class="line">        <span class="keyword">var</span> v0 = a[<span class="keyword">from</span>];</span><br><span class="line">        <span class="keyword">var</span> v1 = a[to - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">var</span> v2 = a[third_index];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> c01 = <span class="title function_">comparefn</span>(v0, v1);</span><br><span class="line">        <span class="keyword">if</span> (c01 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// v1 &lt; v0, so swap them.</span></span><br><span class="line">            <span class="keyword">var</span> tmp = v0;</span><br><span class="line">            v0 = v1;</span><br><span class="line">            v1 = tmp;</span><br><span class="line">        &#125; <span class="comment">// v0 &lt;= v1.</span></span><br><span class="line">        <span class="keyword">var</span> c02 = <span class="title function_">comparefn</span>(v0, v2);</span><br><span class="line">        <span class="keyword">if</span> (c02 &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// v2 &lt;= v0 &lt;= v1.</span></span><br><span class="line">            <span class="keyword">var</span> tmp = v0;</span><br><span class="line">            v0 = v2;</span><br><span class="line">            v2 = v1;</span><br><span class="line">            v1 = tmp;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// v0 &lt;= v1 &amp;&amp; v0 &lt; v2</span></span><br><span class="line">            <span class="keyword">var</span> c12 = <span class="title function_">comparefn</span>(v1, v2);</span><br><span class="line">            <span class="keyword">if</span> (c12 &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">// v0 &lt;= v2 &lt; v1</span></span><br><span class="line">                <span class="keyword">var</span> tmp = v1;</span><br><span class="line">                v1 = v2;</span><br><span class="line">                v2 = tmp;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// v0 &lt;= v1 &lt;= v2</span></span><br><span class="line">        a[<span class="keyword">from</span>] = v0;</span><br><span class="line">        a[to - <span class="number">1</span>] = v2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> pivot = v1;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> low_end = <span class="keyword">from</span> + <span class="number">1</span>; <span class="comment">// Upper bound of elements lower than pivot.</span></span><br><span class="line">        <span class="keyword">var</span> high_start = to - <span class="number">1</span>; <span class="comment">// Lower bound of elements greater than pivot.</span></span><br><span class="line"></span><br><span class="line">        a[third_index] = a[low_end];</span><br><span class="line">        a[low_end] = pivot;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// From low_end to i are elements equal to pivot.</span></span><br><span class="line">        <span class="comment">// From i to high_start are elements that haven&#x27;t been compared yet.</span></span><br><span class="line"></span><br><span class="line">        <span class="attr">partition</span>: <span class="keyword">for</span> (<span class="keyword">var</span> i = low_end + <span class="number">1</span>; i &lt; high_start; i++) &#123;</span><br><span class="line">            <span class="keyword">var</span> element = a[i];</span><br><span class="line">            <span class="keyword">var</span> order = <span class="title function_">comparefn</span>(element, pivot);</span><br><span class="line">            <span class="keyword">if</span> (order &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                a[i] = a[low_end];</span><br><span class="line">                a[low_end] = element;</span><br><span class="line">                low_end++;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (order &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    high_start--;</span><br><span class="line">                    <span class="keyword">if</span> (high_start == i) <span class="keyword">break</span> partition;</span><br><span class="line">                    <span class="keyword">var</span> top_elem = a[high_start];</span><br><span class="line">                    order = <span class="title function_">comparefn</span>(top_elem, pivot);</span><br><span class="line">                &#125; <span class="keyword">while</span> (order &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">                a[i] = a[high_start];</span><br><span class="line">                a[high_start] = element;</span><br><span class="line">                <span class="keyword">if</span> (order &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                    element = a[i];</span><br><span class="line">                    a[i] = a[low_end];</span><br><span class="line">                    a[low_end] = element;</span><br><span class="line">                    low_end++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (to - high_start &lt; low_end - <span class="keyword">from</span>) &#123;</span><br><span class="line">            <span class="title class_">QuickSort</span>(a, high_start, to);</span><br><span class="line">            to = low_end;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title class_">QuickSort</span>(a, <span class="keyword">from</span>, low_end);</span><br><span class="line">            <span class="keyword">from</span> = high_start;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">comparefn</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">QuickSort</span>(arr, <span class="number">0</span>, arr.<span class="property">length</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr)</span><br></pre></td></tr></table></figure>

<p>我们以数组 <code>[10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</code> 为例，分析执行的过程。</p>
<p>1.执行 QuickSort 函数 参数 from 值为 0，参数 to 的值 11。</p>
<p>2.10 &lt; to - from &lt; 1000 第三个基准元素的下标为 <code>(0 + 11 &gt;&gt; 1) = 5</code>，基准值 a[5] 为 5。</p>
<p>3.比较 a[0] a[10] a[5] 的值，然后根据比较结果修改数组，数组此时为 [0, 9, 8, 7, 6, 5, 4, 3, 2, 1, 10]</p>
<p>4.将基准值和数组的第(from + 1)个即数组的第二个元素互换，此时数组为 [0, 5, 8, 7, 6, 9, 4, 3, 2, 1, 10]，此时在基准值 5 前面的元素肯定是小于 5 的，因为第三步已经做了一次比较。后面的元素是未排序的。</p>
<p>我们接下来要做的就是把后面的元素中小于 5 的全部移到 5 的前面。</p>
<p>5.然后我们进入 partition 循环，我们依然以这个数组为例，单独抽出来写个 demo 讲一讲</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设代码执行到这里，为了方便演示，我们直接设置 low_end 等变量的值</span></span><br><span class="line"><span class="comment">// 可以直接复制到浏览器中查看数组变换效果</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="number">0</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">var</span> low_end = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> high_start = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> pivot = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;起始数组为&#x27;</span>, a)</span><br><span class="line"></span><br><span class="line"><span class="attr">partition</span>: <span class="keyword">for</span> (<span class="keyword">var</span> i = low_end + <span class="number">1</span>; i &lt; high_start; i++) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> element = a[i];</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;循环当前的元素为：&#x27;</span>, a[i])</span><br><span class="line">    <span class="keyword">var</span> order = element - pivot;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (order &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        a[i] = a[low_end];</span><br><span class="line">        a[low_end] = element;</span><br><span class="line">        low_end++;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (order &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            high_start--;</span><br><span class="line">            <span class="keyword">if</span> (high_start == i) <span class="keyword">break</span> partition;</span><br><span class="line">            <span class="keyword">var</span> top_elem = a[high_start];</span><br><span class="line">            order = top_elem - pivot;</span><br><span class="line">        &#125; <span class="keyword">while</span> (order &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        a[i] = a[high_start];</span><br><span class="line">        a[high_start] = element;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (order &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            element = a[i];</span><br><span class="line">            a[i] = a[low_end];</span><br><span class="line">            a[low_end] = element;</span><br><span class="line">            low_end++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;最后的结果为&#x27;</span>, a)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(low_end)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(high_start)</span><br></pre></td></tr></table></figure>

<p>6.此时数组为 <code>[0, 5, 8, 7, 6, 9, 4, 3, 2, 1, 10]</code>，循环从第三个元素开始，a[i] 的值为 8，因为大于基准值 5，即 order &gt; 0，开始执行 do while 循环，do while 循环的目的在于倒序查找元素，找到第一个小于基准值的元素，然后让这个元素跟 a[i] 的位置交换。<br>第一个小于基准值的元素为 1，然后 1 与 8 交换，数组变成  <code>[0, 5, 1, 7, 6, 9, 4, 3, 2, 8, 10]</code>。high_start 的值是为了记录倒序查找到哪里了。</p>
<p>7.此时 a[i] 的值变成了 1，然后让 1 跟 基准值 5 交换，数组变成了 <code>[0, 1, 5, 7, 6, 9, 4, 3, 2, 8, 10]</code>，low_end 的值加 1，low_end 的值是为了记录基准值的所在位置。</p>
<p>8.循环接着执行，遍历第四个元素 7，跟第 6、7 的步骤一致，数组先变成 <code>[0, 1, 5, 2, 6, 9, 4, 3, 7, 8, 10]</code>，再变成 <code>[0, 1, 2, 5, 6, 9, 4, 3, 7, 8, 10]</code></p>
<p>9.遍历第五个元素 6，跟第 6、7 的步骤一致，数组先变成 <code>[0, 1, 2, 5, 3, 9, 4, 6, 7, 8, 10]</code>，再变成 <code>[0, 1, 2, 3, 5, 9, 4, 6, 7, 8, 10]</code></p>
<p>10.遍历第六个元素 9，跟第 6、7 的步骤一致，数组先变成 <code>[0, 1, 2, 3, 5, 4, 9, 6, 7, 8, 10]</code>，再变成 <code>[0, 1, 2, 3, 4, 5, 9, 6, 7, 8, 10]</code></p>
<p>11.在下一次遍历中，因为 i &#x3D;&#x3D; high_start，意味着正序和倒序的查找终于找到一起了，后面的元素肯定都是大于基准值的，此时退出循环</p>
<p>12.遍历后的结果为 <code>[0, 1, 2, 3, 4, 5, 9, 6, 7, 8, 10]</code>，在基准值 5 前面的元素都小于 5，后面的元素都大于 5，然后我们分别对两个子集进行 QuickSort</p>
<p>13.此时 low_end 值为 5，high_start 值为 6，to 的值依然是 10，from 的值依然是 0，<code>to - high_start &lt; low_end - from </code> 的结果为 <code>true</code>，我们对 QuickSort(a, 6, 10)，即对后面的元素进行排序，但是注意，在新的 QuickSort 中，因为 from - to 的值小于 10，所以这一次其实是采用了插入排序。所以准确的说，<strong>当数组长度大于 10 的时候，v8 采用了快速排序和插入排序的混合排序方法。</strong></p>
<p>14.然后 <code>to = low_end</code> 即设置 to 为 5，因为 while(true) 的原因，会再执行一遍，to - from 的值为 5，执行 InsertionSort(a, 0, 5)，即对基准值前面的元素执行一次插入排序。</p>
<p>15.因为在 to - from &lt;&#x3D; 10 的判断中，有 return 语句，所以 while 循环结束。</p>
<p>16.v8 在对数组进行了一次快速排序后，然后对两个子集分别进行了插入排序，最终修改数组为正确排序后的数组。</p>
<h2 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h2><p>最后来张示意图感受下插入排序和快速排序：</p>
<p><img src="https://github.com/mqyqingfeng/Blog/raw/master/Images/sort/insertion-vs-quick.gif" alt="插入排序和快速排序"></p>
<p>图片来自于 <a target="_blank" rel="noopener" href="https://www.toptal.com/developers/sorting-algorithms">https://www.toptal.com/developers/sorting-algorithms</a></p>
<h2 id="专题系列"><a href="#专题系列" class="headerlink" title="专题系列"></a>专题系列</h2><p>JavaScript专题系列目录地址：<a target="_blank" rel="noopener" href="https://github.com/mqyqingfeng/Blog">https://github.com/mqyqingfeng/Blog</a>。</p>
<p>JavaScript专题系列预计写二十篇左右，主要研究日常开发中一些功能点的实现，比如防抖、节流、去重、类型判断、拷贝、最值、扁平、柯里、递归、乱序、排序等，特点是研(chao)究(xi) underscore 和 jQuery 的实现方式。</p>
<p>如果有错误或者不严谨的地方，请务必给予指正，十分感谢。如果喜欢或者有所启发，欢迎 star，对作者也是一种鼓励。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/10/11/JavaScript%E4%B8%93%E9%A2%98%E4%B9%8B%E8%A7%A3%E8%AF%BBv8%E6%8E%92%E5%BA%8F%E6%BA%90%E7%A0%81/" data-id="cm2n1iutm002x9sr3fcmf8xl3" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/10/11/JavaScript%E4%B8%93%E9%A2%98%E4%B9%8B%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD(%E4%B8%8A)/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2024/10/11/JavaScript%E4%B8%93%E9%A2%98%E4%B9%8B%E5%87%BD%E6%95%B0%E7%BB%84%E5%90%88/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E3%80%8AES6-%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%94%E8%AE%B0/">《ES6 教程》笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E3%80%8AJavaScript%E6%95%99%E7%A8%8B%E3%80%8B%E7%AC%94%E8%AE%B0/">《JavaScript教程》笔记</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/10/24/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2024/10/11/JavaScript%E6%B7%B1%E5%85%A5%E4%B9%8Bnew%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/11/JavaScript%E6%B7%B1%E5%85%A5%E4%B9%8Bcall%E5%92%8Capply%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/11/JavaScript%E6%B7%B1%E5%85%A5%E4%B9%8Bbind%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%AE%9E%E7%8E%B0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/10/11/JavaScript%E6%B7%B1%E5%85%A5%E4%B9%8B%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>